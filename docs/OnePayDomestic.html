<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: OnePayDomestic</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: OnePayDomestic</h1>

    




<section>

<header>
    
        <h2><span class="attribs"><span class="type-signature"></span></span>OnePayDomestic<span class="signature">(config)</span><span class="type-signature"></span></h2>
        
            <div class="class-description"><p>OnePay Domestic payment gateway helper.
<br>
Supports VN domestic ATM cards</p>
<p><em>Hàm hỗ trợ cổng thanh toán nội địa OnePay</em>
<br>
<em>Hỗ trợ thẻ ATM nội địa</em></p></div>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    
    <h2>Constructor</h2>
    

    
    <h4 class="name" id="OnePayDomestic"><span class="type-signature"></span>new OnePayDomestic<span class="signature">(config)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Instantiate a OnePayDomestic checkout helper
<br>
<em>Khởi tạo hàm thanh toán OnePayDomestic</em></p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>config</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>check OnePay.configSchema for data type requirements. <br> <em>Xem OnePay.configSchema để biết yêu cầu kiểu dữ liệu</em></p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="onepay_OnePayDomestic.js.html">onepay/OnePayDomestic.js</a>, <a href="onepay_OnePayDomestic.js.html#line37">line 37</a>
    </li></ul></dd>
    

    

    

    
</dl>

















    <h5>Example</h5>
    
    <pre class="prettyprint"><code>import { OnePayDomestic } from 'vn-payments';

const TEST_CONFIG = OnePayDomestic.TEST_CONFIG;

const onepayCheckout = new OnePayDomestic({
	accessCode: TEST_CONFIG.accessCode,
	merchant: TEST_CONFIG.merchant,
	paymentGateway: TEST_CONFIG.paymentGateway,
	secureSecret: TEST_CONFIG.secureSecret,
});

// checkoutUrl is an URL instance
const checkoutUrl = await onepayCheckout.buildCheckoutUrl(params);

this.response.writeHead(301, { Location: checkoutUrl.href });
this.response.end();</code></pre>



    
    </div>

    
        <h3 class="subsection-title">Extends</h3>

        


    <ul>
        <li><a href="OnePay.html">OnePay</a></li>
    </ul>


    

    

    

    

    

    

    
        <h3 class="subsection-title">Members</h3>

        
            
<h4 class="name" id=".checkoutSchema"><span class="type-signature">(static) </span>checkoutSchema<span class="type-signature"> :SimpleSchema</span></h4>




<div class="description">
    <p>The schema is based on field data requirements from OnePay's dev document
<br>
<em>Cấu trúc dữ liệu được dựa trên các yêu cầu của tài liệu OnePay</em></p>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">SimpleSchema</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="onepay_OnePayDomestic.js.html">onepay/OnePayDomestic.js</a>, <a href="onepay_OnePayDomestic.js.html#line260">line 260</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id=".TEST_CONFIG"><span class="type-signature">(static) </span>TEST_CONFIG<span class="type-signature"></span></h4>




<div class="description">
    <p>OnePayDomestic test configs</p>
<p><em>Cấu hình dùng thử OnePay Domestic.</em></p>
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="onepay_OnePayDomestic.js.html">onepay/OnePayDomestic.js</a>, <a href="onepay_OnePayDomestic.js.html#line297">line 297</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="checkoutPayloadDefaults"><span class="type-signature"></span>checkoutPayloadDefaults<span class="type-signature"></span></h4>




<div class="description">
    <p>Return default checkout Payloads</p>
<p><em>Lấy checkout payload mặc định cho cổng thanh toán này</em></p>
</div>







<dl class="details">

    

    

    

    
    <dt class="tag-overrides">Overrides:</dt>
    <dd class="tag-overrides"><ul class="dummy"><li>
        <a href="OnePay.html#checkoutPayloadDefaults">OnePay#checkoutPayloadDefaults</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="onepay_OnePayDomestic.js.html">onepay/OnePayDomestic.js</a>, <a href="onepay_OnePayDomestic.js.html#line168">line 168</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id=".getReturnUrlStatus"><span class="type-signature">(static) </span>getReturnUrlStatus<span class="signature">(responseCode, locale)</span><span class="type-signature"> &rarr; {string}</span></h4>
    

    











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>responseCode</code></td>
            

            <td class="type">
            
                
<span class="param-type">*</span>


            
            </td>

            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>Response code from gateway. <br> <em>Mã trả về từ cổng thanh toán.</em></p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>locale</code></td>
            

            <td class="type">
            
                
<span class="param-type">*</span>


            
            </td>

            

            
                <td class="default">
                
                    vn
                
                </td>
            

            <td class="description last"><p>Same locale at the buildCheckoutUrl. Note, 'vn' for Vietnamese. <br> <em>Cùng nơi với hàm buildCheckoutUrl. Lưu ý, Việt Nam là 'vn'</em></p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="onepay_OnePayDomestic.js.html">onepay/OnePayDomestic.js</a>, <a href="onepay_OnePayDomestic.js.html#line44">line 44</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>A string contains error status converted from response code. <br> <em>Một chuỗi chứa trạng thái lỗi được chuyển lại từ response code</em></p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">string</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="buildCheckoutUrl"><span class="type-signature"></span>buildCheckoutUrl<span class="signature">(payload)</span><span class="type-signature"> &rarr; {Promise.&lt;URL>}</span></h4>
    

    



<div class="description">
    <p>Build checkout URL to redirect to the payment gateway.
<br>
<em>Hàm xây dựng url để redirect qua OnePay gateway, trong đó có tham số mã hóa (còn gọi là public key).</em></p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>payload</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="global.html#OnePayCheckoutPayload">OnePayCheckoutPayload</a></span>


            
            </td>

            

            

            <td class="description last"><p>Object that contains needed data for the URL builder, refer to typeCheck object above. <br> <em>Đối tượng chứa các dữ liệu cần thiết để thiết lập đường dẫn.</em></p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    
    <dt class="inherited-from">Inherited From:</dt>
    <dd class="inherited-from"><ul class="dummy"><li>
        <a href="OnePay.html#buildCheckoutUrl">OnePay#buildCheckoutUrl</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="onepay_OnePay.js.html">onepay/OnePay.js</a>, <a href="onepay_OnePay.js.html#line44">line 44</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>buildCheckoutUrl promise</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;URL></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="validateCheckoutPayload"><span class="type-signature"></span>validateCheckoutPayload<span class="signature">(payload)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Validate checkout payload against specific schema. Throw ValidationErrors if invalid against checkoutSchema
<br>
Build the schema in subclass.
<br>
<em>Kiểm tra tính hợp lệ của dữ liệu thanh toán dựa trên schema đã được đồng bộ với tài liệu của nhà cung cấp.
Hiển thị lỗi nếu không hợp lệ với checkoutSchema.</em>
<br>
<em>Schema sẽ được tạo trong class con.</em></p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>payload</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="global.html#OnePayCheckoutPayload">OnePayCheckoutPayload</a></span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    
    <dt class="tag-overrides">Overrides:</dt>
    <dd class="tag-overrides"><ul class="dummy"><li>
        <a href="OnePay.html#validateCheckoutPayload">OnePay#validateCheckoutPayload</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="onepay_OnePay.js.html">onepay/OnePay.js</a>, <a href="onepay_OnePay.js.html#line146">line 146</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="verifyReturnUrl"><span class="type-signature"></span>verifyReturnUrl<span class="signature">(query)</span><span class="type-signature"> &rarr; {Promise.&lt;<a href="global.html#OnePayDomesticReturnObject">OnePayDomesticReturnObject</a>>}</span></h4>
    

    



<div class="description">
    <p>Verify return query string from OnePay using enclosed vpc_SecureHash string</p>
<p><em>Hàm thực hiện xác minh tính đúng đắn của các tham số trả về từ onepay Payment</em></p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>query</code></td>
            

            <td class="type">
            
                
<span class="param-type">*</span>


            
            </td>

            

            

            <td class="description last"><p>Query data object from GET handler (<code>response.query</code>). <br> <em>Object query trả về từ GET handler</em></p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    
    <dt class="tag-overrides">Overrides:</dt>
    <dd class="tag-overrides"><ul class="dummy"><li>
        <a href="OnePay.html#verifyReturnUrl">OnePay#verifyReturnUrl</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="onepay_OnePayDomestic.js.html">onepay/OnePayDomestic.js</a>, <a href="onepay_OnePayDomestic.js.html#line230">line 230</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Promise object which resolved with normalized returned data object, with additional fields like isSuccess. <br> <em>Promise khi hoàn thành sẽ trả về object data từ cổng thanh toán, được chuẩn hóa tên theo camelCase và đính kèm thuộc tính isSuccess</em></p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;<a href="global.html#OnePayDomesticReturnObject">OnePayDomesticReturnObject</a>></span>


    </dd>
</dl>

    





        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-utils.html">utils</a></li></ul><h3>Classes</h3><ul><li><a href="NganLuong.html">NganLuong</a></li><li><a href="OnePayDomestic.html">OnePayDomestic</a></li><li><a href="OnePayInternational.html">OnePayInternational</a></li><li><a href="SohaPay.html">SohaPay</a></li><li><a href="VNPay.html">VNPay</a></li></ul><h3><a href="global.html">Global</a></h3>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Thu Feb 08 2018 17:49:32 GMT+0700 (+07)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>